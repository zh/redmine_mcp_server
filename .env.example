# Redmine Configuration
# The base URL of your Redmine instance (without trailing slash)
REDMINE_URL=http://localhost:3000

# Your Redmine API key (find it at: /my/account when logged in)
REDMINE_API_KEY=your_api_key_here

# MCP Server Configuration
# Port for the MCP server to listen on
MCP_PORT=3100

# Host for the MCP server to bind to
# Use 0.0.0.0 to allow external connections, or localhost for local only
MCP_HOST=localhost

# Environment (development, production, test)
RACK_ENV=development

# Logging
# Log level: debug, info, warn, error, fatal
LOG_LEVEL=info

# HTTP Client Configuration (Async)
# Request timeout in seconds (default: 30)
HTTP_TIMEOUT=30

# Read timeout in seconds (default: 60)
HTTP_READ_TIMEOUT=60

# Note: Async HTTP client handles connection pooling and compression automatically
# Compression (gzip/deflate) is always enabled via Accept-Encoding headers

# Falcon Server Configuration
# Number of server processes (default: 1)
# Increase for production to utilize multiple CPU cores
FALCON_PROCESSES=1

# Metrics Configuration
# Threshold in seconds for classifying requests as slow (default: 1.0)
METRICS_SLOW_THRESHOLD=1.0

# ============================================================================
# ChatGPT Actions Configuration (Optional)
# ============================================================================
# Enable ChatGPT Actions mode (REST API + OAuth support)
# Set to 'true' to enable ChatGPT/Custom GPT integration
CHATGPT_MODE=false

# Require OAuth authentication for API requests
# Set to 'true' to require Bearer tokens (recommended for production)
CHATGPT_REQUIRE_AUTH=false

# OpenAPI Schema Configuration
# Public URL where the MCP server is accessible (for OpenAPI schema)
OPENAPI_SERVER_URL=http://localhost:3100

# Title shown in OpenAPI schema
OPENAPI_TITLE=Redmine MCP API

# Version shown in OpenAPI schema
OPENAPI_VERSION=1.0.0

# Contact email for the API (shown in ChatGPT plugin manifest)
CONTACT_EMAIL=support@example.com

# Legal information URL (shown in ChatGPT plugin manifest)
LEGAL_INFO_URL=

# ChatGPT verification token (provided by OpenAI when registering plugin)
CHATGPT_VERIFICATION_TOKEN=REPLACE_WITH_YOUR_TOKEN

# ============================================================================
# Redmine Doorkeeper OAuth Setup (Required for ChatGPT per-user auth)
# ============================================================================
# To enable per-user OAuth authentication with ChatGPT:
#
# 1. Ensure Redmine 6.1.0+ with Doorkeeper enabled
# 2. Go to Redmine Admin > Applications
# 3. Create a new OAuth Application:
#    - Name: ChatGPT Integration
#    - Redirect URI: https://chat.openai.com/aip/{your-gpt-id}/oauth/callback
#    - Scopes: read write
# 4. Note the Client ID and Client Secret
# 5. In ChatGPT GPT Builder, configure OAuth with:
#    - Authorization URL: https://your-redmine.com/oauth/authorize
#    - Token URL: https://your-redmine.com/oauth/token
#    - Client ID/Secret from step 4
